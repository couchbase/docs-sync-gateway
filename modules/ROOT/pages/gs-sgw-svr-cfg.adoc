= Configure Server for Sync Gateway
:page-layout: article
include::partial$_attributes-local.adoc[]
:xref-pfx: {xref-pfx-sgw}:

:sg_download_link: {url-package-downloads}/{version-full}/
:sg_package_name: couchbase-sync-gateway-community_{version-full}_x86_64
:sg_package_name_ee: couchbase-sync-gateway-enterprise_{version-full}_x86_64
:sg_accel_package_name: couchbase-sync-gateway-enterprise_{version-full}_x86_64
:btn-pfx: Select btn:

Assuming you have an operational Couchbase Server deployment then:

== STEP 1 -- Create a bucket

We will use this bucket to test the deployment of Sync Gateway, later in the Getting Started section.

. Login to Couchbase Server's Admin Console
.. Go to `+http://localhost:8091+`
.. Enter your administrator credentials

. Within the Admin Console's toolbar,
.. Select the *Buckets* tab
.. btn:[Add Bucket] to continue
+
image::cb-create-bucket.png[]
.. In the pop-up window, enter *getting-started-bucket* for the *name* and click *Add Bucket*.
You can leave the other options to their defaults.
+
image::cb-create-bucket-popup.png[]

== STEP 2 -- Create RBAC user

// tag::create-rbac-user[]

To connect to Couchbase Server, you must create an RBAC user.
These user credentials are used in a later section to start Sync Gateway.

. Open the *Security* tab and click the *Add User* button.
+
image::create-user.png[]
+
Couchbase Server opens the _Add New User_ dialog.

. Create the RBAC user with appropriate access roles.
+
In the _Add New User_ window, provide a *Username* and *Password*; the credentials to be used by Sync Gateway to connect.
+
Note that the role details differ, depending on your Couchbase Server version -- see <<rbac-roles>>.
+
[#rbac-roles]
.Select RBAC roles
=====
[{tabs}]
====
Couchbase Server 6.6+::
+
--
. In the pop-up window, provide
** A Username (`sync_gateway`)
** A Password (`password`).

. Assign the _Sync Gateway_ role to the user
+
xref:server:learn:security/roles.adoc#sync-gateway[Sync Gateway RBAC Role Description]
+
image::user-settings-6-6.png[,450]

+
NOTE: Users are encouraged to move away from using the _Application Access_ and _Read-Only Admin_ roles for this purpose.

--

Couchbase Server 5.5 - 6.5::
+
--
. In the pop-up window, provide:
** A Username (`sync_gateway`)
** A Password (`password`).

. Assign these RBAC roles to the user(as shown on the image below):

** Application Access
** Read Only Admin
+
image::user-settings-5-5.png[,450]
--

Couchbase Server 5.1::
+
--
. In the pop-up window, provide:
** A Username (`sync_gateway`)
** A Password* (`password`).

. Assign these RBAC roles to the user:
** Bucket Full Access
** Read Only Admin

image::user-settings.png[,450]
--
====
=====
// end::create-rbac-user[]

== STEP 3 -- Set-up Network access

When installing Couchbase Server on the cloud, ensure that network permissions (or firewall settings) allow incoming connections to Couchbase Server ports.

include::partial$sgw-svr-ports.adoc[]

If this is not done, the Couchbase Server node can experience difficulty joining a cluster.

You can refer to the {xref-pfx-svr}install:install-ports.adoc
[Couchbase Server Network Configuration] guide to see the full list of available ports and their associated services.

== Related Information

.Next Steps
* {xref-pfx}gs-sgw-install.adoc[Install Sync Gateway]

.Learn more:
* {xref-pfx}shared-bucket-access.adoc[About data synchronization]
* {xref-pfx}config-properties.adoc[Config Schema Reference]

.Do more:
** _Import Filters_: To use Sync Gateway on clusters with a large amount of data you can configure an _import filter_ (see: {xref-pfx}ad-sgw-cfg-import-filter.adoc[Configure import filter]).
** _Sync Functions_: For finer gained control of document access, you can  {xref-pfx}ad-sgw-cfg-sync-function.adoc[Configure Sync Function].
