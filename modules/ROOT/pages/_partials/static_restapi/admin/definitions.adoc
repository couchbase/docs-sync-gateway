
[[_definitions]]
== Definitions

// tag::Bootstrap_model[]


[[_bootstrap_model]]
=== Bootstrap_model
Sync Gateway's start-up configuration properties


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**api** +
__optional__|Define API related configuration properties|<<_api_configuration,API configuration>>
|**auth** +
__optional__|Define Auth related configuration properties|<<_auth_configuration,Auth configuration>>
|**bootstrap** +
__optional__|Define fundamental bootstrap related configuration properties|<<_bootstrap_configuration,Bootstrap configuration>>
|**logging** +
__optional__|Define logging configuration|<<_logging_model,Logging_model>>
|**max_file_descriptors** +
__optional__|Maximum number of open file descriptors.|integer
|**replicator** +
__optional__|Define Replicator related configuration properties|<<_replicator_configuration,Replicator configuration>>
|**unsupported** +
__optional__|Collection of unsupported properties|<<_unsupported_configuration,Unsupported configuration>>
|===

[[_api_configuration]]
**API configuration**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**admin_interface** +
__optional__|Port or TCP network address (IP address and the port) that the Admin REST API listens on.

The loopback address prefix before the port (`127.0.0.1`) means the interface will not be reachable from other hosts. To make it reachable, change it to ":4985".

Change requires restart of Admin API +
**Default** : `"127.0.0.1:4985"`|string
|**admin_interface_authentication** +
__optional__|Use the `admin_interface_authentication` property to disable authentication for the metrics API.
This option should be used with discretion and only in test environments.

By default the Admin API requires Couchbase Server RBAC authentication.
The user must provide credentials to an existing user with an appropriate Sync Gateway role. +
**Default** : `true`|boolean
|**compress_responses** +
__optional__|Whether to compress HTTP responses. Set to false to disable compression of HTTP responses. +
**Default** : `true`|boolean
|**cors** +
__optional__|Configuration object for allowing cross-origin resource sharing (CORS).
This is useful to interact directly with Sync Gateway from HTML 5 applications via XHR.

Change requires HTTP server restart|<<_bootstrap_model_cors,cors>>
|**hide_product_version** +
__optional__|Determines whether product versions are removed from Server headers and REST API responses.
This setting does not apply to the Admin REST API.

This customization of the Sync Gateway response avoids revealing the version of the Sync Gateway to HTTP requests to the root path. +
**Default** : `false`|boolean
|**https** +
__optional__|Group in which to specify any API HTTPS configuration properties|<<_bootstrap_model_https,https>>
|**idle_timeout** +
__optional__|Maximum duration (in seconds) to wait for the next request when keep-alives are enabled

Change requires HTTP server restart|integer
|**max_connections** +
__optional__|Maximum number of incoming HTTP connections to accept.

Change requires HTTP server restart|integer
|**metrics_interface** +
__optional__|This defines the Port or TCP network address (IP address and the port) that the Metrics REST API will listen on.

Using the loopback address prefix before the port (`127.0.0.1`) means the interface will not be reachable from other hosts.

For example
`&quot;metricsInterface&quot;: &quot;127.0.0.1:4986&quot;` +
**Default** : `"127.0.0.1:4986"`|string
|**metrics_interface_authentication** +
__optional__|Use the `metrics_interface_authentication` property to disable authentication for the metrics API.
This option should be used with discretion and only in test environments.

By default the Metrics API requires Couchbase Server RBAC authentication.
The user must provide credentials to an existing user with an appropriate Sync Gateway role. +
**Default** : `true`|boolean
|**pretty** +
__optional__|(**Deprecated**) Whether to pretty-print JSON responses. +
**Default** : `false`|boolean
|**profile_interface** +
__optional__|TCP network address (IP address and the port) that the Go profile API listens on.
You can obtain Go profiling information from the interface.
You can omit the IP address.|string
|**public_interface** +
__optional__|Public REST API port

Change requires restart of Public API +
**Default** : `":4984"`|string
|**read_header_timeout** +
__optional__|Maximum duration (in seconds) allowed to read request headers

Change requires HTTP server restart|integer
|**server_read_timeout** +
__optional__|Maximum duration in seconds before timing out the read of an HTTP(S) request.

This property only effects the HTTP connections on the Sync Gateway public and admin ports.

Sync Gateway is written in the Go programming language, therefore the value set in the configuration file is passed to Go's server instance https://golang.org/pkg/net/http/#Server.

Change requires HTTP server restart|integer
|**server_write_timeout** +
__optional__|Maximum duration in seconds before timing out the write of an HTTP(S) response.

This property only effects the HTTP connections on the Sync Gateway public and admin ports.

Sync Gateway is written in the Go programming language, therefore the value set in the configuration file is passed to Go's server instance https://golang.org/pkg/net/http/#Server.

Change requires HTTP server restart|integer
|===

[[_bootstrap_model_cors]]
**cors**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**headers** +
__optional__|List of HTTP headers that can be used by domains specified in the `origin` and `login_origin` properties.

A common value is `[&quot;Content-Type&quot;]` as clients use the `Content-Type: application/json` header when sending data as JSON in the body of POST/PUT requests.

Change requires HTTP server restart|< string > array
|**login_origin** +
__optional__|List of allowed login origins.

Change requires HTTP server restart|< string > array
|**max_age** +
__optional__|Value for the Access-Control-Max-Age header.
This is the period of time, in seconds, that the response to a CORS preflight request is cached before sending another preflight request.

Change requires HTTP server restart|integer
|**origin** +
__optional__|List of allowed origins; use a wildcard character (*) to allow access from everywhere.

*Note* that the wildcard (*) cannot be used if you plan to authenticate users as well (by using the `withCredentials` flag on the client side).
Instead specify the explicit domain(s) in the `origin` and `login_origin` properties of the configuration file.

Change requires HTTP server restart|< string > array
|===

[[_bootstrap_model_https]]
**https**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**tls_cert_path** +
__optional__|Absolute or relative path on the filesystem to the TLS certificate file, if TLS is used to secure Sync Gateway connections

To use plaintext, omit both this property and the `tls_key_path` property.

A relative path is from the directory that contains the Sync Gateway executable file.

Change requires HTTP server restart|string
|**tls_key_path** +
__optional__|Absolute or relative path on the filesystem to the TLS private key files.

To use plaintext, omit both this property and the `tls_cert_path` property.

A relative path is from the directory that contains the Sync Gateway executable file.

Change requires HTTP server restart|string
|**tls_minimum_version** +
__optional__|Enforce a minimum TLS version to be used in replications with Couchbase Lite.

Possible values are:

* "tlsv1"

* "tlsv1.1"

* "tlsv1.2"

* "tlsv1.3"

Change requires HTTP server restart +
**Default** : `"tlsv1.2"`|string
|===

[[_auth_configuration]]
**Auth configuration**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**bcrypt_cost** +
__optional__|Cost to use for bcrypt password hashes|integer
|===

[[_bootstrap_configuration]]
**Bootstrap configuration**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**ca_cert_path** +
__optional__|Absolute or relative path on the filesystem to the root CA certificate to verify the certificate chain and hostname of the Couchbase Server cluster.

Works in conjunction with `server_tls_skip_verify` to control whether system root pool is used or not.
Set this empty and `server_tls_skip_verify` true to avoid using system root pool|string
|**config_update_frequency** +
__optional__|Sets the interval between checks for new or updated configurations made by other nodes in Couchbase Server

It is provided as string, which uses Go's duration format (e.g: 1s = 1 second, 5m = 5 minutes , 1h32m15s = 1 hour, 32 mins, 15 seconds)
see: https://pkg.go.dev/time#ParseDuration +
**Default** : `"10s"`|string
|**group_id** +
__optional__|The ID of the configuration group to which this node belongs. +
**Default** : `"default"`|string
|**kv_tls_port** +
__optional__|Optional value for the Memcached TLS port, if not using the default (11207)|integer
|**max_concurrent_query_ops** +
__optional__|Sets the maximum number of concurrent query operations allowed|integer
|**password** +
__optional__|The password to be used when authenticating to the server. +
**Default** : `"none"`|string
|**server** +
__optional__|Sets the endpoint for the Couchbase Server holding (database) configuration details.

The value of the _server_ property specifies the Hostname(s) to the Couchbase Server node(s) in the cluster.

Sync Gateway supports the ability to specify multiple hosts in the configuration.
Sync Gateway supports both the `couchbase://` and `http://` schemes for specifying connection endpoints.

Sync Gateway also supports _SSL_ in the connection to Couchbase Server; use the `couchbases://` scheme for this.
As with the Couchbase Server SDKs, the `https://` scheme is *not* supported.

Examples of valid `server` values for _IPv4_ include:
- `couchbase://host1`
- `couchbases://host1`
- `couchbase://host1,host2`
- `couchbase://host1:11210,host2,`
- `couchbases://host1:11207,host2`
- `http://host1:8091`
- `http://host1,host2:8091`
- `http://foo:bar@host1:8091`

Examples of valid `server` values for _IPv6_ include:
- `http://[2001:db8::8811]:8091` _// single node IPv6 - http scheme with default server port_
- `couchbases://[2001:db8::8811]` _// single node SSL IPv6 - default port (omitted)_
- `couchbase://[2001:db8::8811],[2001:db8::8822]:888` _// node1 default port, node2 port 888_

As with the SDK, when using the `couchbase://` or `couchbases://` schemes, the port is not required, but if specified should be the external/internal bucket ports (defaults are 11210 or 11207 respectively). Attempting to use the admin ports (8091/18091) will result in a startup error.

*Alternate Addresses*

On startup, Sync Gateway will try each hostname that is provided until it is able to connect successfully.

By default, if a remote cluster has an external address set, then when SG connects it will apply a heuristic to determine whether to choose between external or default (internal) addresses.

The choice is based on the host names supplied in the connection string.
- SG uses external networking only when none of the supplied host names match any of Couchbase Server's internal node addresses, and an external address is defined.
- In all other cases Sync Gateway uses the default (internal) networking.

However, it is possible to override this behavior by adding a `network` parameter to the connection string.

The `network` parameter can be –
- auto - this is the default value if no parameter is provided. In this case the heuristic described above is applied to determine the address used; so effectively there is no override.
- external - to always force use of the external address
- default - to always force use of the internal address

For example:
`&quot;server&quot;: &quot;couchbases://my-cbs-server?network=default&quot;`

Will force the connection to ignore any alternative external addresses configured on the Couchbase Server node.

*Lost Connections*

If the connection to Couchbase Server is lost during normal operations, Sync Gateway will automatically re-connect to another node in the cluster. During that re-connection period, the Sync Gateway will appear offline - see link:database-offline.html[Taking Databases Offline] - and documents will not be replicated to mobile clients. +
**Default** : `"none"`|string
|**server_tls_skip_verify** +
__optional__|Defaults to `false`, which requires a valid CA Cert Path.
Works in conjunction with `ca_cert_path` to control whether system root pool is used or not.
Set this true and `ca_cert_path` empty to allow, for example, self-signed or un-trusted certificates. This will be the default of-of-the-box setting.|boolean
|**use_tls_server** +
__optional__|Default to `true`, which forces the connection to Couchbase Server to use TLS.

Use `use_tls_server` to enforce use of a secure scheme (for example, `couchbases://`) to connect to Couchbase Server.

Set this `false` to use a non-secure scheme (for example with `couchbase://`).

If the scheme used does not match that indicated by the `use_tls_server` value (for example, `couchbases://` with `use_tls_server` = `false`) then Sync Gateway will error and refuse to start. +
**Default** : `true`|boolean
|**username** +
__optional__|The username to be used when authenticating to the server. +
**Default** : `"none"`|string
|**x509_cert_path** +
__optional__|Use x509_cert_path to define the absolute or relative path on the filesystem to the x509 certificate.

Relative paths are relative to the directory containing the Sync Gateway executable.|string
|**x509_key_path** +
__optional__|Absolute or relative path on the filesystem to the X509 key.

Relative paths are relative to the directory containing the Sync Gateway executable.|string
|===

[[_replicator_configuration]]
**Replicator configuration**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**blip_compression** +
__optional__|This sets the 'deflate' compression level to use when compressing messages sent via the WebSocket protocol, where:

* 0 means no compression,
* 1 means fastest (least) compression
* 9 means slowest (most) compression.|integer
|**max_heartbeat** +
__optional__|This specifies the Maximum Heartbeat value for the `_changes feed` requests; the time in second between heartbeats.
- The default value of `maxHeartbeat` is 0 (zero)
- The minimum value of `maxHeartbeat` is 25 (25,000 ms)|integer
|===

[[_unsupported_configuration]]
**Unsupported configuration**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**http2.enabled** +
__optional__|**Default** : `false`|boolean
|**stats_log_freq** +
__optional__|It is provided as string, which uses Go's duration format (e.g: 1s = 1 second, 5m = 5 minutes , 1h32m15s = 1 hour, 32 mins, 15 seconds)
see: https://pkg.go.dev/time#ParseDuration +
**Default** : `"1m"`|string
|**use_stdlib_json** +
__optional__|**Default** : `false`|boolean
|===


// end::Bootstrap_model[]


// tag::Bootstrap_model[]


[[_logging_model]]
=== Logging_model
Holding object for all logging-related settings.

Note that in addition to setting these logging values in the bootstrap configuration file, you can also use the ADMIN Rest API to set or change the values without requiring a full reload.
See: link:rest-api-admin.html[Rest Admin API]

A full logging initialization is required.

See the link:logging.html[Logging] page for a fuller explanation on logging settings.


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**console** +
__optional__|Settings for the console output logging.|<<_logging_model_console,console>>
|**debug** +
__optional__|The debug logging-level provides lower level development analysis

* Minimum max_age is 1 day
_ Log File Name is `sg_debug.log`|<<_logging_model_debug,debug>>
|**error** +
__optional__|Activate the error logging level - see link:logging.html[Logging] page for more on log levels.|<<_logging_model_error,error>>
|**info** +
__optional__|The information logging-level provides important diagnostics for support and customers|<<_logging_model_info,info>>
|**log_file_path** +
__optional__|Absolute or relative path on the filesystem to the log file.
A relative path is from the directory that contains the Sync Gateway executable file.

Changes require full logging re-initialization|string
|**redaction_level** +
__optional__|Optionally, log files can be redacted.
This means that user-data, considered to be private, is removed.
Such data includes:

* Key/value pairs in JSON documents

* Usernames

* Query-fields that reference key/value pairs and/or usernames

* Names and email addresses retrieved during product registration

* Extended attributes

This redaction of user-data is referred to as partial redaction.

To enable it, set this property to `&quot;redaction_level&quot; : &quot;partial&quot;` in the configuration file: +
**Default** : `"none"`|string
|**stats** +
__optional__|The stats logging level|<<_logging_model_stats,stats>>
|**trace** +
__optional__|The trace logging-level.|<<_logging_model_trace,trace>>
|**warn** +
__optional__|The warning logging-level is triggered when Sync Gateway detects something is wrong but it can still service requests

* Minimum max_age is 90 days

* Log File Name is `sg_warn.log`|<<_logging_model_warn,warn>>
|===

[[_logging_model_console]]
**console**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**collation_buffer_size** +
__optional__|Size of the collation buffer|integer
|**color_enabled** +
__optional__|Use ANSI color codes in the console output (Linux/MacOS only). +
**Default** : `false`|boolean
|**enabled** +
__optional__|Indicates whether console logging is enabled|boolean
|**file_output** +
__optional__|Changes require full logging re-initialization|string
|**log_keys** +
__optional__|List of log keys to enable for diagnostic logging.

Available log key values are described in the
link:logging.html#lbl-log-keys[Log Keys] page|< string > array
|**log_level** +
__optional__|The level of logging.

Log levels are cumulative (that is, log entries at WARN will also be included in the INFO and DEBUG logs).

See:
link:logging.html#lbl-log-keys[Log Levels] page +
**Default** : `"info"`|string
|**rotation** +
__optional__|The log file may be rotated by defining a "rotation" sub document.
See details in link:logging.html#lbl-logrotate[log rotation].|<<_logging_model_rotation,rotation>>
|===

[[_logging_model_rotation]]
**rotation**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**localtime** +
__optional__|If true, it uses the computer's local time to format the backup timestamp.
False uses UTC. +
**Default** : `false`|boolean
|**max_age** +
__optional__|The maximum number of days to retain old log files.
This can't be set below the minimum allowed value for the given level.|integer
|**max_size** +
__optional__|The maximum size in MB of the log file before it gets rotated.|integer
|**rotated_logs_size_limit** +
__optional__|Controls how much disk space the rotated (and compressed) log files for this level can take up.

The value is expressed in megabytes.
The minimum value is `10` and there is no maximum value.|integer
|===

[[_logging_model_debug]]
**debug**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**collation_buffer_size** +
__optional__|Size of the collation buffer|integer
|**enabled** +
__optional__|Sets this logging-level on or off.

Note, you are advised to keep this log level enabled when troubleshooting issues.
Enabling this log level is a requirement to receive https://www.couchbase.com/support-policy[Enterprise Support]. +
**Default** : `false`|boolean
|**rotation** +
__optional__|The log file may be rotated by defining a "rotation" sub document. See details in link:logging.html#lbl-logrotate[log rotation].|<<_logging_model_rotation,rotation>>
|===

[[_logging_model_rotation]]
**rotation**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**localtime** +
__optional__|If true, it uses the computer's local time to format the backup timestamp. False uses UTC. +
**Default** : `false`|boolean
|**max_age** +
__optional__|The maximum number of days to retain old log files. This can't be set below the minimum allowed value for the given level.|integer
|**max_size** +
__optional__|The maximum size in MB of the log file before it gets rotated.|integer
|**rotated_logs_size_limit** +
__optional__|Controls how much disk space the rotated (and compressed) log files for this level can take up.

The value is expressed in megabytes.
The minimum value is `10` and there is no maximum value.|integer
|===

[[_logging_model_error]]
**error**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**collation_buffer_size** +
__optional__|Size of the collation buffer|integer
|**enabled** +
__optional__|Enable this _error_ log level.

* The _error_, _warn_ and _info_ log levels are enabled by default.

* The _debug_ log level is disabled by default.

*Note:* You are advised to keep this log level enabled to troubleshoot issues.

Enabling this log level is a requirement to receive
https://www.couchbase.com/support-policy[Enterprise Support].|boolean
|**rotation** +
__optional__|The log file may be rotated by defining a "rotation" sub document.

See details in link:logging.html#lbl-logrotate[log rotation].|<<_logging_model_rotation,rotation>>
|===

[[_logging_model_rotation]]
**rotation**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**localtime** +
__optional__|If true, it uses the computer's local time to format the backup timestamp. False uses UTC. +
**Default** : `false`|boolean
|**max_age** +
__optional__|The maximum number of days to retain old log files. This can't be set below the minimum allowed value for the given level.|integer
|**max_size** +
__optional__|The maximum size in MB of the log file before it gets rotated.|integer
|**rotated_logs_size_limit** +
__optional__|Controls how much disk space the rotated (and compressed) log files for this level can take up.

The value is expressed in megabytes.
The minimum value is `10` and there is no maximum value.|integer
|===

[[_logging_model_info]]
**info**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**collation_buffer_size** +
__optional__|Size of the collation buffer|integer
|**enabled** +
__optional__|Whether to enable this log level. +
**Default** : `true`|boolean
|**rotation** +
__optional__|The log file may be rotated by defining a "rotation" sub document|<<_logging_model_rotation,rotation>>
|===

[[_logging_model_rotation]]
**rotation**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**localtime** +
__optional__|If true, it uses the computer's local time to format the backup timestamp. False uses UTC. +
**Default** : `false`|boolean
|**max_age** +
__optional__|The maximum number of days to retain old log files. This can't be set below the minimum allowed value for the given level.|integer
|**max_size** +
__optional__|The maximum size in MB of the log file before it gets rotated.|integer
|**rotated_logs_size_limit** +
__optional__|Controls how much disk space the rotated (and compressed) log files for this level can take up.

The value is expressed in megabytes.
The minimum value is `10` and there is no maximum value.|integer
|===

[[_logging_model_stats]]
**stats**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**collation_buffer_size** +
__optional__|Size of the collation buffer|integer
|**enabled** +
__optional__|Whether to enable this log level. +
**Default** : `false`|boolean
|**rotation** +
__optional__|The log file may be rotated by defining a "rotation" sub document. See details in link:logging.html#lbl-logrotate[log rotation].|<<_logging_model_rotation,rotation>>
|===

[[_logging_model_rotation]]
**rotation**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**localtime** +
__optional__|If true, it uses the computer's local time to format the backup timestamp. False uses UTC. +
**Default** : `false`|boolean
|**max_age** +
__optional__|The maximum number of days to retain old log files. This can't be set below the minimum allowed value for the given level.|integer
|**max_size** +
__optional__|The maximum size in MB of the log file before it gets rotated.|integer
|**rotated_logs_size_limit** +
__optional__|Controls how much disk space the rotated (and compressed) log files for this level can take up.

The value is expressed in megabytes.
The minimum value is `10` and there is no maximum value.|integer
|===

[[_logging_model_trace]]
**trace**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**collation_buffer_size** +
__optional__|Size of the collation buffer|integer
|**enabled** +
__optional__|Whether to enable this log level. +
**Default** : `false`|boolean
|**rotation** +
__optional__|The log file may be rotated by defining a "rotation" sub document. See details in link:logging.html#lbl-logrotate[log rotation].|<<_logging_model_rotation,rotation>>
|===

[[_logging_model_rotation]]
**rotation**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**localtime** +
__optional__|If true, it uses the computer's local time to format the backup timestamp. False uses UTC. +
**Default** : `false`|boolean
|**max_age** +
__optional__|The maximum number of days to retain old log files. This can't be set below the minimum allowed value for the given level.|integer
|**max_size** +
__optional__|The maximum size in MB of the log file before it gets rotated.|integer
|**rotated_logs_size_limit** +
__optional__|Controls how much disk space the rotated (and compressed) log files for this level can take up.

The value is expressed in megabytes.
The minimum value is `10` and there is no maximum value.|integer
|===

[[_logging_model_warn]]
**warn**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**collation_buffer_size** +
__optional__|Size of the collation buffer|integer
|**enabled** +
__optional__|Whether to enable this log level.
The _error_, _warn_ and _info_ log levels are enabled by default.
The _debug_ log level is disabled by default.

Note, however, that you are advised to keep this log level enabled to troubleshoot issues. Enabling this log level is a requirement to receive https://www.couchbase.com/support-policy[Enterprise Support].|boolean
|**rotation** +
__optional__|The log file may be rotated by defining a "rotation" sub document. See details in link:logging.html#lbl-logrotate[log rotation].|<<_logging_model_rotation,rotation>>
|===

[[_logging_model_rotation]]
**rotation**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**localtime** +
__optional__|If true, it uses the computer's local time to format the backup timestamp. False uses UTC. +
**Default** : `false`|boolean
|**max_age** +
__optional__|The maximum number of days to retain old log files. This can't be set below the minimum allowed value for the given level.|integer
|**max_size** +
__optional__|The maximum size in MB of the log file before it gets rotated.|integer
|**rotated_logs_size_limit** +
__optional__|Controls how much disk space the rotated (and compressed) log files for this level can take up.

The value is expressed in megabytes.
The minimum value is `10` and there is no maximum value.|integer
|===


// end::Bootstrap_model[]


// tag::database_model[]


[[_database_model]]
=== Database_model
This `database` object defines the JSON configuration of a sync gateway database.

Provision the configuration using the request message body of a `put /{db}/` and-or `put /{db}/_config`
that comprises all the properties required to upsert a replication.


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**allow_conflicts** +
__optional__|Use `allow_conflict` to define whether Sync Gateway will handle conflicts.

The default of `true` indicates that conflicts are handled.

Set the value to `false` to cause Sync Gateway to reject any attempt to write conflicting revisions (returning a `409` HTTP status code).
It will be up to the client to resolve the conflict.

Restarting Sync Gateway with this property enabled will not automatically result in disk space savings (compaction on a document won't occur until a document is updated).

_Constraints:_
- Push replications to pre-2.8 targets do not support the `&quot;allow_conflicts&quot;: false` setting; the target must use `&quot;allow_conflicts&quot;: true`.

Change initiates a database restart. +
**Default** : `true`|boolean
|**allow_empty_password** +
__optional__|Use `allow_empty_password` to define whether to Sync Gateway users can be created with empty passwords. +
**Default** : `false`|boolean
|**bucket** +
__optional__|Defines the Couchbase Server bucket to be used for this Sync Gateway database
bucket

If not specified, then the database name is used as the bucket name. +
**Default** : `"the database name"`|string
|**bucket_op_timeout_ms** +
__optional__|Use `bucket_op_timeout_ms` to define how long Sync Gateway will wait for a bucket operation to complete before timing out and trying again.

You may increase this value where there is a heavy load on Couchbase Server and operations are likely to take more than 2.5 seconds to complete.

The default value is 2500 milliseconds.

Changes initiate a database restart.|integer
|**cache** +
__optional__|The `cache` group of properties define the configuration for this database's channel and revision caches|<<_cache,Cache>>
|**client_partition_window_secs** +
__optional__|Use the `client_partition_window_secs` property to define how long clients can remain offline for without losing replication metadata.

Default 2 592 000 seconds (30 days) +
**Default** : `"2592000"`|string
|**compact_interval_days** +
__optional__|Use `` property to define the interval between scheduled compaction runs (in days).

Set a zero (0) value to suppress running compactions.

Change initiates a database restart.|number
|**delta_sync** +
__optional__|_NOTE:_ Delta Sync is an Enterprise Edition feature on Sync Gateway and Couchbase Lite.

Use the `delta_sync` object to specify the delta sync configuration properties.

In this context, delta-sync, is the ability to replicate only those parts of a Couchbase mobile document that have changed.
This results in significant savings in bandwidth consumption as well as throughput improvements; both useful benefits when network bandwidth is typically constrained.

Delta Sync does not apply to attachment contents.

Delta Sync is disabled by default on the Sync Gateway. You can enable it through the `enabled` property.

If delta sync is enabled on Sync Gateway, then Couchbase Lite clients will switch to using delta sync automatically.
Similarly, if delta sync is disabled on Sync Gateway, clients will switch to normal mode.

Changes initiate a database reload|<<_delta_sync,Delta Sync>>
|**enable_shared_bucket_access** +
__optional__|Use the `enable_shared_bucket_access` property to define whether to use extended attributes to store sync metadata.
This is required to enable mobile-to-server data sync (_mobile convergence_).

You can learn more about this functionality in link:sync-with-couchbase-server.html[Syncing with Couchbase Server]

This property works in conjunction with the `import_docs` property, which determines whether a node participates in import processing.
Leave `enable_shared_bucket_access` `true` on all nodes participating in such a configuration.

On start-up, Sync Gateway will generate the mobile-specific metadata for all the pre-existing documents in the Couchbase Server bucket. From then on, documents can be inserted on the Server directly (with N1QL or SDKs) or through the Sync Gateway REST API.

Change initiates a database restart +
**Default** : `true`|boolean
|**event_handlers** +
__optional__|Webhooks in Sync Gateway are designed to minimize performance impacts on Sync Gateway's regular processing.

Sync Gateway manages the number of processes that are spawned for webhook event handling, so that slow response times from the HTTP POST operations don't consume available CPU resources on Sync Gateway nodes.

When a `webhook` event handler is defined, after Sync Gateway has updated a document, Sync Gateway adds a `document_changed` event to an asynchronous event-processing queue (the event queue).

New processes are then spawned to apply the `filter` function to the documents and to perform the HTTP POST operations.

When an event is not added to the event queue, but is instead discarded, a warning message is written to the the Sync Gateway log.

You can configure Sync Gateway to log information about event handling, by including either the log key `Event` or `Events+` in the `Log` property in your Sync Gateway configuration file. `Events+` is more verbose.

See also:
link:webhooks.html[Webhook]..|<<_event_handler,Event Handler>>
|**guest** +
__optional__|Defines whether a GUEST user is available and able to interacted, unauthenticated, with the Public REST API|<<_database_model_guest,guest>>
|**import_backup_old_rev** +
__optional__|Use the `import_backup_old_rev` property to define whether import should attempt to create a temporary backup of the previous revision body, when available|string
|**import_docs** +
__optional__|Use the `import_docs` property to define whether the Sync Gateway node should automatically import Couchbase Server documents;

This property works in conjunction with the `enable_shared_bucket_access` property, which enables Xattrs.

Since Sync Gateway 2.7, all Sync Gateway nodes can be configured as import nodes.
This results in performance benefits as the import process is shared across all Sync Gateway nodes.

Prior to version 2.7, `import_docs` can only be set to `true` on a single node.

Changes initiate a database restart +
**Default** : `false`|boolean
|**import_filter** +
__optional__||<<_import_filter_model,Import_filter_model>>
|**import_partitions** +
__optional__|Use the `import_partitions` property to define how many import partitions should be used for import sharding.

Partitions are distributed among all Sync Gateway nodes participating in import processing (import_docs:true), and each process a subset of the server's vbuckets.

Each partition is processed by a separate goroutine, so `import_partitions` can be used to tune concurrency based on the number of Sync Gateway nodes, and the number of cores per node.|integer
|**isgr_enabled** +
__optional__|Use the `isgr_enabled` property to define whether this Sync Gateway node can be assigned inter-Sync Gateway replications for this database.

If set to false, the Sync Gateway node will not participate in inter-Sync Gateway replications. +
**Default** : `true`|boolean
|**isgr_websocket_heartbeat_secs** +
__optional__|If set, this duration (in seconds) is used as a custom heartbeat interval for websocket ping frames in inter-Sync Gateway replications.|integer
|**local_doc_expiry_secs** +
__optional__|Use the `local_doc_expiry_secs` property to define an expiry value for local documents managed on Sync Gateway.

Local documents are used by the Couchbase Lite replicator to track up to which sequence number a given client has synchronized and where it should resume the next time it connects to Sync Gateway.

Clients failing to replicate within the expiry window are forced to restart their replication from the beginning (sequence zero).

This property is intended to minimize accumulation of obsolete replication checkpoint documents in the Couchbase Server bucket.

The default is `7776000` seconds (90 days).|integer
|**name** +
__optional__|Use `name` to define the Sync Gateway database name.

Change initiates database restart|string
|**num_index_replicas** +
__optional__|use `num_index_replicas` property to define the number of index replicas used when creating the core Sync Gateway indexes.

Only applicable if `databases.$db.use_views` is set to `false` (default value).

Change initiates a database restart.|integer
|**offline** +
__optional__|Use `offline` to determine whether Sync Gateway should start the database in offline mode.

The default of false means the database will be online. +
**Default** : `false`|boolean
|**oidc** +
__optional__|Use the `oidc` object properties to defined any OpenID Connect providers and associated credentials.|<<_oidc_group,OIDC Group>>
|**old_rev_expiry_seconds** +
__optional__|Use the `old_rev_expiry_seconds` property to define the number of seconds before old revisions are removed from Couchbase Server buckets.|integer
|**query_pagination_limit** +
__optional__|Use the `query_pagination_limit` property to define the Query limit to be used during pagination of large queries.

Change initiates a database restart.|integer
|**revs_limit** +
__optional__|This property defines the maximum depth to which a document's revision tree can grow.

It value governs the point at which to prune a document's revision tree.

For more information see: link:revisions.html[Revisions] page.|integer
|**send_www_authenticate_header** +
__optional__|Whether to send WWW-Authenticate header in 401 responses. +
**Default** : `true`|boolean
|**serve_insecure_attachment_types** +
__optional__|The sending of a content-disposition header for attachments with headers such as "text/html"
forces a download, rather than browser rendering.

Use this option to suppress sending the content-disposition, allowing the browser to render the attachment. +
**Default** : `false`|boolean
|**session_cookie_http_only** +
__optional__|This flag disallows cookies from being used by Javascript; by default javascript CAN use them +
**Default** : `false`|boolean
|**session_cookie_name** +
__optional__|Starting in Sync Gateway 2.0, it is possible to customize the session cookie name that is used for this database.

This property is mostly used by web applications interacting with multiple Sync Gateway databases.

Browsers typically have two methods of determining which cookie to use for a given request: the `URL` path, or the cookie name.

Use this property, to set different cookie names for each database specified in the configuration file. Let's consider the following configuration file:

[source,json]
----
{
    "databases": {
      "db1": {
        "session_cookie_name": "CustomName1",
        "bucket": "bucket-1"
        },
        "db2": {
          "session_cookie_name": "CustomName2",
          "bucket": "bucket-2"
        }
      }
    }
}

----

With this configuration, the `Set-Cookie` response header of the POST `:4984/{db}/_session` endpoint (Public REST API) would then have the form "CustomName1=3cad4b95524179bf144fe0d92b8f09877bb86bf5;path=/db1/".

When using POST `:4985/{db}/_session` (Admin REST API) to create a session, the cookie value is returned in the response body instead of the `Set-Cookie` header. In this case, it could also be set by the client, for web applications it would be the following in JavaScript:

[source,javascript]
----
cookie1String = "CustomName1=3cad4b95524179bf144fe0d92b8f09877bb86bf5;path=/db1/";
document.cookie = cookie1String;
---- +
**Default** : `"SyncGatewaySession"`|string
|**session_cookie_secure** +
__optional__|Override secure cookie flag (that is, disable secure cookies).

If SSLCert is set, then secure cookies are also used by default.
However, this flag can be set `false` to override this behavior and allow insecure cookies to be used alongside SSL.

If SSLCert is not set then this flag defaults to false. +
**Default** : `true`|boolean
|**slow_query_warning_threshold** +
__optional__|The maximum wait time, in milliseconds,for N1QL or View queries made by Sync Gateway

Log warnings if the run time of a N1QL or View query, made by Sync Gateway, exceeds this value.|integer
|**sync** +
__optional__||<<_sync_model,Sync_model>>
|**unsupported** +
__optional__|This group comprises an unrelated collection of unsupported properties that may, potentially, be useful in controlled testing scenarios.

NOTE: Due to the unsupported nature of these options, there is no guarantee on their continued availability.|<<_unsupported_properties_model,Unsupported Properties Model>>
|**use_views** +
__optional__|If set to `true`, Sync Gateway will use views instead of GSI for system functions like authentication and replication. +
**Default** : `false`|boolean
|**user_xattr_key** +
__optional__|The `user_xattr_key` identifies the user xattr used to hold the channel access grants for documents in this database.

If it is not specified or its value is spaces or null then this feature is disabled (default).

If you change the value of this key, no existing grant assignments will be changed until a document mutation is triggered.
This can be done in a number of ways:
- a mutation to the document which we'll see via DCP
- an on-demand import either through write or get
- by using the resync function.

_Dependencies:_
 The `user_xattr_key` feature requires that –

* `enable_shared_bucket_access` be = `true`

* xattrs be supported on the connected Couchbase Server

Change initiates a database restart +
**Default** : `"none"`|string
|**view_query_timeout_secs** +
__optional__|Use the `view_query_timeout_secs` property to define the view query timeout in seconds.

This is the time Sync Gateway should wait for a view query response from Couchbase Server before it times out.

The timeout applies to both view and N1QL queries issued by Sync Gateway.|integer
|===

[[_cache]]
**Cache**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**channel_cache** +
__optional__|Use the `channel_cache` group's properties to configure the database's channel cache

Changes initiate a database restart|<<_channel_cache,Channel Cache>>
|**rev_cache** +
__optional__|Use the `rev_cache` properties to configure the revision cache|<<_revision_cache,Revision Cache>>
|===

[[_channel_cache]]
**Channel Cache**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**compact_high_watermark_pct** +
__optional__|Use `compact_high_watermark_pct` to define the trigger value for starting channel cache eviction.
Specify the value as a percentage (of `max_number`)

When the cache size, determined by `max_number`, reaches the high watermark, the eviction process iterates through the cache, removing inactive channels.|integer
|**compact_low_watermark_pct** +
__optional__|Use `compact_low_watermark_pct` to define the trigger value for stopping channel cache eviction.
Specify the value as a percentage (of `max_number`)

When the cache size, determined by `max_number` returns to a value lower than `compact_low_watermark_pct`, the cache eviction process is stopped.|integer
|**enable_star_channel** +
__optional__|Use `enable_star_channel` to define whether Sync GAteway should use the all documents (*) channel - sometimes referred to as the 'star' channel. +
**Default** : `true`|boolean
|**expiry_seconds** +
__optional__|Use `expiry_seconds` to define how long (in seconds) Sync Gateway should keep cached entries beyond the minimum retained.|integer
|**max_length** +
__optional__|Maximum number of entries maintained in cache per channel.|integer
|**max_num_pending** +
__optional__|Use `max_num_pending` to define the maximum number of pending sequences before skipping the sequence.|integer
|**max_number** +
__optional__|Use `max_number` to define the maximum number of channel caches allowed at any one point.
This property is used alongside the associated eviction watermarks `compact_low_watermark_pct` and `compact_high_watermark_pct` to control the cache size.

The default value for this property is 50000.
Assuming the default channel `min_length` and `max_length` values, this would result in a memory usage under 1GB.

Tuning this property is an https://www.couchbase.com/products/editions[Enterprise Edition] feature - in the Community Edition any change to the default value is ignored.

_Enterprise Edition Only_:
 The `max_number` value can be tuned to optimize for cache hits (requests that are handled using the cache), as opposed to cache misses (requests that require a round-trip to Couchbase Server to fetch data).
 The cache hit/miss ratio can be obtained with the following:

`cache hit/miss ratio` = `cache.chan_cache_hits` / `cache.chan_cache_misses`

Increasing the `max_number` value can increase the cache hit/miss ratio, resulting in better cache utilization.

If the cache size grows to reach the high watermark (`compact_high_watermark_pct`), channels with no connected replications will be evicted before channels which are associated with an active pull replication (i.e a blip-based pull replication in Couchbase Lite 2.x, or an active `/{db}/_changes` request in Couchbase Lite 1.x).

The minimum allowed value is 100.

It isn't possible to remove the limit altogether, users who wish to remove the limit would need to set `max_number` to an arbitrarily high value.|integer
|**max_wait_pending** +
__optional__|Maximum wait time in milliseconds for a pending sequence before skipping sequences.|integer
|**max_wait_skipped** +
__optional__|Maximum wait time in milliseconds for a skipped sequence before abandoning the sequence.|integer
|**min_length** +
__optional__|Minimum number of entries maintained in cache per channel.|integer
|**query_limit** +
__optional__|Limit used for channel queries|integer
|===

[[_revision_cache]]
**Revision Cache**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**shard_count** +
__optional__|Tuning this property is an https://www.couchbase.com/products/editions[Enterprise Edition] feature.
The Community Edition is configured with the default value, and will ignore any value in the configuration file.

Number of shards the rev cache should be split into. More shards allows for lower cache contention when accessing distinct revisions, at the cost of some memory overhead per-shard.
This generally should not greatly exceed the number of CPU threads available to Sync Gateway.

It is generally not recommended to set this property, unless advised by Couchbase https://www.couchbase.com/support-policy[Enterprise Support].|integer
|**size** +
__optional__|Size of the revision cache, specified as the total number of document revisions to cache in memory for all recently accessed documents.

When the revision cache is full, Sync Gateway removes less recent document revisions to make room for new document revisions.
Adjust this property to tune memory consumption by Sync Gateway, for example on servers with less memory and in cases when Sync Gateway creates many new documents and/or updates many documents relative to the number of read operations.

_Disabling the revision cache_

Disabling the revision cache is an https://www.couchbase.com/products/editions[Enterprise Edition] feature.

To disable the revision entirely, set this property to 0.
Setting this property to 0 on the Community Edition is ignored.

Disabling the revision cache would be useful when there are very large documents or if you expect a very low cache hit rate.
Otherwise it could negatively impact the latency of replications.
It is generally not recommended to disable the revision cache, unless advised by Couchbase
https://www.couchbase.com/support-policy[Enterprise Support].|integer
|===

[[_delta_sync]]
**Delta Sync**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**enabled** +
__optional__|Use the `delta_sync.enabled` property to turn delta sync mode on or off for the given database.

The following configuration example enables delta sync.

[source,json]
----
{
  "databases": {
    "db": {
      "delta_sync": {
        "enabled": true,
        "rev_max_age_seconds": 86400
      }
    }
  }
}
----

Footnotes

* Use of Delta Sync incurs additional bucket storage requirements which can be tuned with the <<databases-this_db-delta_sync-rev_max_age_seconds,`rev_max_age_seconds`>> property.

* Delta Sync is automatically enabled for peer-to-peer sync between Couchbase Lite clients.

* Delta sync is disabled for Couchbase Lite database replicas.

* Push replications do not use Delta Sync when pushing to a pre-2.8 target. +
**Default** : `false`|boolean
|**rev_max_age_seconds** +
__optional__|Use `delta_sync.rev_max_age_seconds` to adjust the time box within which deltas can be generated.

On a write operation, the revision body is backed up in the bucket and retained for `rev_max_age_seconds` to calculate future revision deltas.
As a result, new deltas can only be generated for read requests that come in within the `rev_max_age_seconds` time window.
The storage of backed up revision bodies for delta sync incurs additional bucket storage requirements.

The additional storage can be calculated with the following formula: `(doc_size * updates_per_day * 86400) / rev_max_age_seconds`.

For example, with `rev_max_age_seconds`'s default value, an average document size of 4 KB and 100 writes/day, enabling delta sync would take up an additional 400 KB of storage on Couchbase Server (`(4 * 100 * 86400)/86400`).

Setting this value to 0 will generate deltas opportunistically on pull replications, with no additional storage requirements.|integer
|===

[[_event_handler]]
**Event Handler**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**db_state_changed** +
__optional__|Use the `db_state_changed` property group to define the actions to perform when a `db_state` change is detected.|<<_db_state_changed_model,db_state_changed model>>
|**document_changed** +
__optional__|The configuration for the action to perform when a document change is detected.|<<_document_changed,Document Changed>>
|**max_processes** +
__optional__|Maximum number of events that can be processed concurrently, that is, no more than `max_processes` concurrent processes will be spawned for event handling.

The default value should work well in the majority of cases.
You should not need to adjust it to tune performance.
However, if you wish to ensure that most webhook posts are sent, you can set it to sufficiently high value.|integer
|**wait_for_process** +
__optional__|Maximum wait time in milliseconds before canceling event processing for an event that is detected when the event queue is full.

If you set the value to 0 (zero), then incoming events are discarded immediately if the event queue is full.

If you wish to avoid any blocking of standard Sync Gateway processing this may be a desirable value to use.

The default value should work well in the majority of cases. You should not need to adjust it to tune performance. +
**Default** : `"100"`|string
|===

[[_db_state_changed_model]]
**db_state_changed model**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**filter** +
__optional__|Use `db_state_changed.filter``` to define a JavaScript function that determines which state changes to post.|string
|**handler** +
__optional__|Specify the type of event handler.

This must be `webhook` currently).|string
|**options** +
__optional__|Options can be specified per-handler, and are specific to each handler type.|string
|**timeout** +
__optional__|Defines the period in seconds to wait for a response to the operation.
Default: 60|integer
|**url** +
__optional__|Defines the URL to post to (for a webhook event handler).|string
|===

[[_document_changed]]
**Document Changed**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**filter** +
__optional__|Use `document_changed.filter` to define a JavaScript function that determines which documents to post.

The filter function accepts the document body as input and returns a boolean value.

* If the filter function returns true, then Sync Gateway posts the document.

* If the filter function returns false, then Sync Gateway does not post the document.

* If no filter function is defined, then Sync Gateway posts all changed documents.

Filtering only determines which documents to post.
It does not extract specific content from documents and post only that.|string
|**handler** +
__optional__|Specify the type of event handler.

This must be `webhook` currently).|string
|**options** +
__optional__|Options can be specified per-handler, and are specific to each handler type.|string
|**timeout** +
__optional__|Defines the period in seconds to wait for a response to the POST operation.

Using a timeout ensures that slow-running POST operations don't cause the webhook event queue to back up.

Slow-running POST operations are discarded (if they time out), so that new events can be processed.
When the timeout is reached, Sync Gateway stops listening for a response.

A value of 0 (zero) means no timeout.

You should not need to adjust it to tune performance as he default value should work well in the majority of cases.|integer
|**url** +
__optional__|Defines the URL to post documents to (for a webhook event handler).|string
|===

[[_database_model_guest]]
**guest**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**disabled** +
__optional__|Set `disabled` = `false` to allow GUEST

For example:
`curl -X PUT username:password@localhost:4985/db/_config -H &quot;Content-Type: application/json&quot; --data-binary &#39;{&quot;guest&quot;: {&quot;disabled&quot;:false}}` +
**Default** : `true`|boolean
|===

[[_oidc_group]]
**OIDC Group**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**default_provider** +
__optional__|Use this `default_provider` property to identify the provider to use for OIDC requests that do not specify a provider.

If only one provider is specified in the providers map, then that is used as the default provider.
If multiple providers are defined and default_provider is not specified, requests to `/db/_oidc` must specify the provider parameter.|string
|**providers** +
__optional__|Include an entry for each OIDC provider|<<_oidc_providers,OIDC Providers>>
|===

[[_oidc_providers]]
**OIDC Providers**

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**this_provider** +
__optional__|<<_oidc_provider,OIDC Provider>>
|===

[[_oidc_provider]]
**OIDC Provider**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**allow_unsigned_provider_tokens** +
__optional__|Unsigned provider tokens are not accepted.

Set `&quot;allow_unsigned_provider_tokens&quot;: true` to opt-in to accepting unsigned tokens from providers. +
**Default** : `false`|boolean
|**callback_url** +
__optional__|The callback URL to be invoked after the end-user obtains a client token.
When not provided, Sync Gateway will generate it based on the incoming request.

_Optional_|string
|**client_id** +
__optional__|The client ID defined in the provider for Sync Gateway.|string
|**disable_callback_state** +
__optional__|DisableCallbackState determines whether or not to maintain state between the `/_oidc` and
`/_oidc_callback` endpoints.

Disabling this action is NOT recommended as it will increase vulnerability to Cross-Site Request Forgery (CSRF, XSRF).

Set `&quot;disable_callback_state&quot;: true` to switch-off callback state. +
**Default** : `false`|boolean
|**disable_cfg_validation** +
__optional__|Couchbase Sync Gateway, by default, applies strict validation of the OpenID Connect configuration based on the OIDC specification.

Set `&quot;disable_cfg_validation&quot;: true` when you do not want strict validation of the OIDC configuration. +
**Default** : `false`|boolean
|**disable_session** +
__optional__|By default, Sync Gateway will create a new session for the user upon successful OIDC authentication, and set that session in the usual way on the _oidc_callback and _oidc_refresh responses.

If disable_session is set to true, the session is not created (clients must use the ID token for subsequent authentications).

_Optional_|string
|**discovery_url** +
__optional__|Optional.
Discovery URL used to obtain the OpenID Connect provider configuration.
If not specified, the default discovery endpoint of [issuer]/.well-known/openid-configuration will be used.|string
|**include_access** +
__optional__|Optional.
When true, the oidccallback response will include the access_token, expires_at and token_type properties returned by the OP.|string
|**issuer** +
__optional__|The OpenID Connect Provider issuer.|string
|**register** +
__optional__|Whether Sync Gateway should automatically create users for successfully authenticated users that don't have an already existing user in Sync Gateway.

Optional.|string
|**scope** +
__optional__|By default, Sync Gateway uses the scope "openid email" when calling the OP's authorize endpoint.

If the scope property is defined in the config (as an array of string values), it will override this scope.

*Optional. *|string
|**user_prefix** +
__optional__|Optional.
Specifies the prefix for Sync Gateway usernames for the provider.
When not specified, defaults to issuer.|string
|**username_claim** +
__optional__|You can use `username_claim` to specify a claim other than subject to use as the Sync Gateway username.

The specified claim must be a string, as numeric claims may be un-marshalled inconsistently between Sync Gateway and the underlying OIDC library.

When authenticating incoming OIDC tokens, Sync Gateway currently treats the username as [user_prefix]_[subject].
By default user_prefix is the issuer, but can be customized in the Sync Gateway provider config.
Subject is always the sub claim in the token.

Behavior:

* If username_claim is set but user_prefix is not set, use that claim as the Sync Gateway username.

* If username_claim is set and user_prefix is also set, use [user_prefix]_[username_claim] as the Sync Gateway username.

* If username_claim is not set and user_prefix is set, use [user_prefix]_[subject] as the Sync Gateway username (existing behavior).

* If neither username_claim nor user_prefix are set, use [issuer]_[subject] as the Sync Gateway username (existing behavior). +
**Default** : `"optional"`|string
|**validation_key** +
__optional__|Client secret associated with the client. Required for auth code flow.|string
|===

[[_unsupported_properties_model]]
**Unsupported Properties Model**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**api_endpoints** +
__optional__||<<_database_model_api_endpoints,api_endpoints>>
|**disable_clean_skipped_query** +
__optional__|Clean skipped sequence processing bypasses final check|boolean
|**oidc_test_provider** +
__optional__|Config settings for OIDC test provider|<<_database_model_oidc_test_provider,oidc_test_provider>>
|**oidc_tls_skip_verify** +
__optional__|Unsupported option for use in development and testing environment ONLY

`oidc_tls_skip_verify` can be used to enable the use of self-signed certs for OpenID Connection testing. +
**Default** : `false`|boolean
|**remote_config_tls_skip_verify** +
__optional__|Unsupported option for use in development and testing environment ONLY

Use only to enable self signed certificates for testing external JavaScript load. +
**Default** : `false`|boolean
|**sgr_tls_skip_verify** +
__optional__|Unsupported option for use in development and testing environment ONLY

`sgr_tls_skip_verify` can be used to skip validation of TLS certs used for Inter-Sync Gateway Replication. +
**Default** : `false`|boolean
|**user_views** +
__optional__|Configuration settings for user views|<<_database_model_user_views,user_views>>
|**warning_thresholds** +
__optional__||<<_warning_threshold,Warning Threshold>>
|===

[[_database_model_api_endpoints]]
**api_endpoints**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**enable_couchbase_bucket_flush** +
__optional__|Determines whether Couchbase buckets can be flushed using the Admin REST API.

Use _only_ for testing purposes if it is necessary to flush data in between tests to start with a clean DB.|boolean
|===

[[_database_model_oidc_test_provider]]
**oidc_test_provider**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**enabled** +
__optional__|Unsupported option for use in development and testing environment ONLY

Determines whether the oidc_test_provider endpoints should be exposed on the public API.|boolean
|===

[[_database_model_user_views]]
**user_views**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**user_views_enabled** +
__optional__|Unsupported option for use in development and testing environment ONLY

Use to determine whether pass-through view query is supported through public API|boolean
|===

[[_warning_threshold]]
**Warning Threshold**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**access_and_role_grants_per_doc** +
__optional__|Number of access and role grants per document to be used as a threshold for grant count warnings|boolean
|**channel_name_size** +
__optional__|Number of channel name characters to be used as a threshold for channel name warnings|boolean
|**channels_per_doc** +
__optional__|Number of channels per document to be used as a threshold for channel count warnings|boolean
|**channels_per_user** +
__optional__|Number of channels per user to be used as a threshold for channel count warnings|boolean
|**xattr_size_bytes** +
__optional__|Number of bytes to be used as a threshold for XATTR size limit warnings|boolean
|===


// end::database_model[]


// tag::Import_filter_model[]


[[_import_filter_model]]
=== Import_filter_model
The `import_filter` controls whether a document written to the Couchbase Server bucket should be made available to Couchbase Mobile clients (that is, whether it ought to be imported).

You should provision the filter as a Javascript function in the request body of a call to the Admin Rest API endpoint `put {db}/_config/import_filter`.

Set the header's content type to `content-Type: application/javascript`.

The function takes the document body as parameter and is expected to return a boolean to indicate whether the document should be imported.

If you do not provide a filter function then no filter will be applied and ALL documents will be imported.

__Type__ : string


// end::Import_filter_model[]


// tag::role_model[]


[[_role_model]]
=== Role_model
Use the `role` property to define a Sync Gateway role


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**admin_channels** +
__optional__|Array of channel names the role allows access to|< string > array
|**all_channels** +
__optional__|Lists all the channels the role has access to including any assigned by the `sync` function.

This is a derived property and changes to it are ignored.|< string > array
|**name** +
__required__|Name of the role|string
|===


// end::role_model[]


[[_role_and_user_model]]
=== Role_and_User_model

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**Role** +
__optional__|<<_role_model,Role_model>>
|**User** +
__optional__|<<_user_model,User_model>>
|===


// tag::Sync_model[]


[[_sync_model]]
=== Sync_model
The `sync` property is a Javascript function that determines which users can access which documents.

This JavaScript function is provisioned using the Admin Rest API Endpoint
`put /{db}/_config/sync`

Add the function as plain javascript in the request body, with the `content-Type: application/javascript` header.

__Type__ : string


// end::Sync_model[]


// tag::user_model[]


[[_user_model]]
=== User_model
Definition of a Sync Gateway user

Change initiates database restart


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**admin_channels** +
__optional__|The channels that the user is able to access.|< string > array
|**admin_roles** +
__optional__|An array of the roles this user is associated with.|< string > array
|**all_channels** +
__optional__|Shows the channels the user can access, as granted by the sync function.

This is a read-only property.
Changes to it are ignored.|< string > array
|**disabled** +
__optional__|This property is usually not included.

If the value is `true`, access for the account is disabled and the user will not be able to login.|boolean
|**email** +
__optional__|Email address of the user.|string
|**name** +
__required__|The user name (the same name used in the URL path).

The valid characters for a user name are alphanumeric ASCII characters and the underscore character.

The name property is required in a POST request.

You don't need to include it in a PUT request because the user name is specified in the URL.|string
|**password** +
__optional__|Password of the user.

Mandatory, unless `allow_empty_password=true`.|string
|**roles** +
__optional__|Shows the roles this user is associated with by the Sync function.

This is a read-only property.
Changes to it are ignored.|< string > array
|===


// end::user_model[]


[[_user-response]]
=== User-response

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**admin_channels** +
__optional__|The channels that the user is able to access.|< string > array
|**all_channels** +
__optional__|Shows the channels the user can access, as granted by the sync function.|< string > array
|**disabled** +
__optional__|This property is usually not included.
If the value is `true`, access for the account is disabled and the user will not be able to login.|boolean
|**email** +
__optional__|Email address of the user.|string
|**name** +
__optional__|The user name (the same name used in the URL path).|string
|===


[[_alldatabases]]
=== AllDatabases
List of available databases in cluster

__Type__ : < string > array


[[_activetasks_model]]
=== ActiveTasks_model

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**continuous** +
__optional__|Whether the replication is continuously monitoring for changes on the source database to send them to the target.|boolean
|**direction** +
__optional__|Inter-Sync Gateway Replication (v1) is uni-directional; valid values are *push* or *pull*.|string
|**doc_write_failures** +
__optional__|The number of docs that have failed to be written (pushed) to the target database.
These docs will not be retried.|integer
|**docs_read** +
__optional__|The number of docs that have been read (fetched) from the source database.|integer
|**docs_written** +
__optional__|The number of docs that have been written (pushed) to the target database.|integer
|**end_last_seq** +
__optional__|_Deprecated_ The most recent `last_seq` value received from the source database during replication.
Use the *last_seq_push* and *last_seq_pull* values instead.|integer
|**is_persistent** +
__optional__|flag to distinguish between the persistent and adhoc replications|boolean
|**last_seq_pull** +
__optional__|The last seq number pulled from the source to target.

The last_seq_pull result can be used by apps to determine if a specific document has been synced to target or not. Do this by querying the **_raw** endpoint and comparing the sequence number of document with the last_seq value that was replicated.|integer
|**last_seq_push** +
__optional__|The last seq number pushed from the source to target.

The last_seq_push result can be used by apps to determine if a specific document has been synced to target or not. Do this by querying the **_raw** endpoint and comparing the sequence number of document with the last_seq value that was replicated.|integer
|**replication_id** +
__optional__|The replication Id.|string
|**source** +
__optional__|The URL of the source database (i.e `&quot;http://example.com:4985/source&quot;`).|string
|**status** +
__optional__|Stopped / running

These will be *adhoc* replications (running) or persistent replications (stopped or running).|string
|**target** +
__optional__|The URL of the target database (i.e `&quot;http://example.com:4985/target&quot;`).|string
|===


[[_docmetadata]]
=== DocMetadata

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**_sync** +
__optional__|<<_docmetadata_sync,_sync>>
|===

[[_docmetadata_sync]]
**_sync**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**history** +
__optional__||<<_docmetadata_history,history>>
|**parents** +
__optional__||< integer > array
|**recent_sequences** +
__optional__||< integer > array
|**rev** +
__optional__|Revision number of the current revision|string
|**sequence** +
__optional__|Sequence number of this document|integer
|===

[[_docmetadata_history]]
**history**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**channels** +
__optional__||< string > array
|**parents** +
__optional__||< integer > array
|**revs** +
__optional__||< string > array
|**time_saved** +
__optional__|Timestamp of the last operation?|string
|===


[[_error]]
=== Error

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**code** +
__optional__|integer (int32)
|**fields** +
__optional__|string
|**message** +
__optional__|string
|===


[[_sgcollectinfostats]]
=== SGCollectInfoStats

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**status** +
__optional__|The current status of sgcollect_info|string
|===


[[_expvars]]
=== ExpVars

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**cb** +
__optional__|Variables reported by the Couchbase SDK (go_couchbase package)|object
|**cmdline** +
__optional__|Built-in variables from the Go runtime, lists the command-line arguments|object
|**mc** +
__optional__|Variables reported by the low-level memcached API (gomemcached package)|object
|**memstats** +
__optional__|Dumps a large amount of information about the memory heap and garbage collector|object
|**syncGateway_changeCache** +
__optional__||<<_expvars_syncgateway_changecache,syncGateway_changeCache>>
|**syncGateway_db** +
__optional__||<<_expvars_syncgateway_db,syncGateway_db>>
|**syncgateway** +
__optional__|Monitoring stats|<<_expvars_syncgateway,syncgateway>>
|===

[[_expvars_syncgateway_changecache]]
**syncGateway_changeCache**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**lag-queue-0000ms** +
__optional__|Histogram of delay from Tap feed till doc is posted to changes feed|object
|**lag-tap-0000ms** +
__optional__|Histogram of delay from doc save till it shows up in Tap feed|object
|**lag-total-0000ms** +
__optional__|Histogram of total delay from doc save till posted to changes feed|object
|**maxPending** +
__optional__|Max number of sequences waiting on a missing earlier sequence number|object
|**outOfOrder** +
__optional__|Number of out-of-order sequences posted|object
|**view_queries** +
__optional__|Number of queries to channels view|object
|===

[[_expvars_syncgateway_db]]
**syncGateway_db**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**channelChangesFeeds** +
__optional__|Number of calls to db.changesFeed, i.e. generating a changes feed for a single channel.|object
|**channelLogAdds** +
__optional__|Number of entries added to channel logs|object
|**channelLogAppends** +
__optional__|Number of times entries were written to channel logs using an APPEND operation|object
|**channelLogCacheHits** +
__optional__|Number of requests for channel-logs that were fulfilled from the in-memory cache|object
|**channelLogRewriteCollisions** +
__optional__|Number of collisions while attempting to rewrite channel logs using SET|object
|**channelLogRewrites** +
__optional__|Number of times entries were written to channel logs using a SET operation (rewriting the entire log)|object
|**document_gets** +
__optional__|Number of times a document was read from the database|object
|**revisionCache_adds** +
__optional__|Number of revisions added to the revision cache|object
|**revisionCache_hits** +
__optional__|Number of times a revision-cache lookup succeeded|object
|**revisionCache_misses** +
__optional__|Number of times a revision-cache lookup failed|object
|**revs_added** +
__optional__|Number of revisions added to the database (including deletions)|object
|**sequence_gets** +
__optional__|Number of times the database's lastSequence was read|object
|**sequence_reserves** +
__optional__|Number of times the database's lastSequence was incremented|object
|===

[[_expvars_syncgateway]]
**syncgateway**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**global** +
__optional__|Global Sync Gateway stats|<<_expvars_global,global>>
|**per_db** +
__optional__|This array contains stats for all databases declared in the config file - see the link:stats-monitoring.html[Sync Gateway Statistics Schema] for more details on the metrics collected and reported by Sync Gateway.

The statistics for each {$db_name} database are grouped into:

* cache related statistics
* cbl_replication_push
* cbl_replication_pull
* database_related_statistics
* delta_sync
* gsi_views
* security_related_statistics
* shared_bucket_import
* per_replication statistics for each `replication_id`|< <<_expvars_per_db,per_db>> > array
|**per_replication** +
__optional__|An array of stats for each replication declared in the config file

*Deprecated @ 2.8*: used only by inter-sync-gateway replications version 1.|< <<_expvars_per_replication,per_replication>> > array
|===

[[_expvars_global]]
**global**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**resource_utilization** +
__optional__|Resource utilization stats|<<_expvars_global_resource_utilization,resource_utilization>>
|===

[[_expvars_global_resource_utilization]]
**resource_utilization**

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**admin_net_bytes_recv** +
__optional__|integer
|**admin_net_bytes_sent** +
__optional__|integer
|**error_count** +
__optional__|integer
|**go_memstats_heapalloc** +
__optional__|integer
|**go_memstats_heapidle** +
__optional__|integer
|**go_memstats_heapinuse** +
__optional__|integer
|**go_memstats_heapreleased** +
__optional__|integer
|**go_memstats_pausetotalns** +
__optional__|integer
|**go_memstats_stackinuse** +
__optional__|integer
|**go_memstats_stacksys** +
__optional__|integer
|**go_memstats_sys** +
__optional__|integer
|**goroutines_high_watermark** +
__optional__|integer
|**num_goroutines** +
__optional__|integer
|**process_cpu_percent_utilization** +
__optional__|integer
|**process_memory_resident** +
__optional__|integer
|**pub_net_bytes_recv** +
__optional__|integer
|**pub_net_bytes_sent** +
__optional__|integer
|**system_memory_total** +
__optional__|integer
|**warn_count** +
__optional__|integer
|===

[[_expvars_per_db]]
**per_db**

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**cache** +
__optional__|object
|**database** +
__optional__|object
|**per_replication** +
__optional__|< object > array
|**security** +
__optional__|object
|===

[[_expvars_per_replication]]
**per_replication**

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**$replication_id** +
__optional__|<<_expvars_per_replication_replication_id,$replication_id>>
|===

[[_expvars_per_replication_replication_id]]
**$replication_id**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**sgr_active** +
__optional__|Whether the replication is active at this time.
*Deprecated @ 2.8*: used only by inter-sync-gateway replications version 1.|boolean
|**sgr_docs_checked_sent** +
__optional__|The total number of documents checked for changes since replication started.
This represents the number of potential change notifications pushed by Sync Gateway.
*Constraints*
 This is not necessarily the number of documents pushed, as a given target might already have the change.
 Used by versions 1 and 2.|integer
|**sgr_num_attachment_bytes_transferred** +
__optional__|The total number of attachment bytes transferred since replication started.
*Deprecated @ 2.8*: used only by inter-sync-gateway replications version 1.|integer
|**sgr_num_attachments_transferred** +
__optional__|The total number of attachments transferred since replication started.
*Deprecated @ 2.8*: used only by inter-sync-gateway replications version 1.|integer
|**sgr_num_docs_failed_to_push** +
__optional__|The total number of documents that failed to be pushed since replication started.
Used by versions 1 and 2.|integer
|**sgr_num_docs_pushed** +
__optional__|The total number of documents that were pushed since replication started.
Used by versions 1 and 2.|integer
|===


[[_forbidden]]
=== Forbidden

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**error** +
__optional__|**Default** : `"conflict"`|string
|**id** +
__optional__||string
|**reason** +
__optional__||string
|**status** +
__optional__||integer
|===


[[_logtags]]
=== LogTags

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**Access** +
__optional__|access() calls made by the sync function|boolean
|**Attach** +
__optional__|Attachment processing|boolean
|**Auth** +
__optional__|Authentication|boolean
|**Bucket** +
__optional__|Sync Gateway interactions with the bucket (verbose logging).|boolean
|**CRUD** +
__optional__|Updates made by Sync Gateway to documents (CRUD+ for verbose logging)|boolean
|**Cache** +
__optional__|Interactions with Sync Gateway's in-memory channel cache (Cache+ for verbose logging)|boolean
|**Changes** +
__optional__|Processing of _changes requests (Changes+ for verbose logging)|boolean
|**DCP** +
__optional__|DCP-feed processing (verbose logging)|boolean
|**Events** +
__optional__|Event processing (webhooks) (Events+ for verbose logging)|boolean
|**Feed** +
__optional__|Server-feed processing (Feed+ for verbose logging)|boolean
|**HTTP** +
__optional__|All requests made to the Sync Gateway REST APIs (Sync and Admin). Note that the log keyword HTTP is always enabled, which means that HTTP requests and error responses are always logged (in a non-verbose manner). HTTP+ provides more verbose HTTP logging.|boolean
|===


[[_purgebody]]
=== PurgeBody
Document ID


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**a_doc_id** +
__optional__|Only possible value is `[&quot;*&quot;]`. It permanently removes all revisions for that document ID.|< enum (*) > array
|===


[[_bulkdocssuccess]]
=== BulkDocsSuccess

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**id** +
__optional__|Design document identifier|string
|**rev** +
__optional__|Revision identifier|string
|===


[[_changesfeedrow]]
=== ChangesFeedRow

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**changes** +
__optional__|List of the document's leafs. Each leaf object contains one field, rev.|< <<_changesfeedrow_changes,changes>> > array
|**id** +
__optional__|Document identifier|string
|**seq** +
__optional__|Update sequence number|integer
|===

[[_changesfeedrow_changes]]
**changes**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**rev** +
__optional__|Identifier of the document revision that changed.|string
|===


[[_queryrow]]
=== QueryRow

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**doc** +
__optional__|The document body. This is only returned if `include_docs=true` is specified in the URL.|object
|**id** +
__optional__|The ID of the document.|string
|**key** +
__optional__|The key in the output row.|object
|**value** +
__optional__|The value in the output row.|object
|===


[[_design]]
=== Design

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**count** +
__optional__|Total number of items available.|integer (int32)
|**limit** +
__optional__|Number of items to retrieve (100 max).|integer (int32)
|**offset** +
__optional__|Position in pagination.|integer (int32)
|===


[[_alldocs]]
=== AllDocs

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**keys** +
__optional__|List of identifiers of the documents to retrieve|< string > array
|===


[[_changes]]
=== Changes

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**last_seq** +
__optional__|Last change sequence number|object
|**results** +
__optional__|List of changes to the database. See the following table for a list of fields in this object.|< <<_changesfeedrow,ChangesFeedRow>> > array
|===


[[_compact_response]]
=== Compact_Response
JSON Respponse to a _compact request


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**compact_id** +
__optional__|Unique identifier|string
|**end_time** +
__optional__|Time the _compact process ended for example "2015-09-23T17:27:17.55+01:00"|string
|**last_error** +
__optional__|Text of the last error message.|string
|**marked_attachments** +
__optional__|The number of attachments marked during the ``mark``` phase.|integer
|**phase** +
__optional__|This item indicates the current phase of `running` compact processes.
It can be useful in monitoring progress.

For failed processes, this indicates the phase at which a compact_id restart will commence (where relevant).

Phases include:
- mark
- sweep
- cleanup|string
|**purged_attachments** +
__optional__|The number of attachments purged by the `sweep` phase of the _compact process.|integer
|**start_time** +
__optional__|Time the _compact process started for example "2015-09-23T17:27:17.55+01:00"|string
|**status** +
__optional__|State of the _compact process (Running, Stopped, Completed)|string
|===


[[_document_model]]
=== Document_model

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**_attachments** +
__optional__|Array of attachments|< <<_document_model_attachments,_attachments>> > array
|**_exp** +
__optional__|Expiry time after which the document will be purged.

The expiration time is set and managed on the Couchbase Server document (TTL is not supported for databases in walrus mode).

The value can be specified in two ways; in ISO-8601 format, for example the 6th of July 2016 at 17:00 in the BST timezone would be 2016-07-06T17:00:00+01:00; it can also be specified as a numeric Couchbase Server expiry value.

Couchbase Server expiries are specified as Unix time, and if the desired TTL is below 30 days then it can also represent an interval in seconds from the current time (for example, a value of 5 will remove the document 5 seconds after it is written to Couchbase Server).

The document expiration time is returned in the response of GET /{db}/{doc} when show_exp=true is included in the querystring.

As with the existing explicit purge mechanism, this applies only to the local database; it has nothing to do with replication.

This expiration time is not propagated when the document is replicated.

The purge of the document does not cause it to be deleted on any other database.|string
|**_id** +
__optional__|The document ID.|string
|**_rev** +
__optional__|Revision identifier of the parent revision the new one should replace. (Not used when creating a new document.)|string
|**_revisions** +
__optional__||<<_document_model_revisions,_revisions>>
|===

[[_document_model_attachments]]
**_attachments**

[options="header", cols=".^3,.^4"]
|===
|Name|Schema
|**attachment_name** +
__optional__|<<_document_model_attachment_name,attachment_name>>
|===

[[_document_model_attachment_name]]
**attachment_name**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**content_type** +
__optional__|The content type of the attachment.|string
|**digest** +
__optional__|Reference to stored attachment content|string
|**length** +
__optional__||integer
|**revpos** +
__optional__||integer
|**stub** +
__optional__|**Default** : `true`|boolean
|**ver** +
__optional__|Indicate that the attachment reference is made through the new reference scheme (not exposed).
Value = 2.|integer
|===

[[_document_model_revisions]]
**_revisions**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**ids** +
__optional__|Array of valid revision IDs, in reverse order (latest first).|< string > array
|**start** +
__optional__|Prefix number for the latest revision.|integer
|===


[[_doc-resp]]
=== doc-resp

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**id** +
__optional__|Document identifier|string
|**ok** +
__optional__|Indicates whether the operation was successful|boolean
|**rev** +
__optional__|Revision identifier|string
|===


[[_queryresult]]
=== QueryResult

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**offset** +
__optional__|Starting index of the returned rows.|string
|**rows** +
__optional__||< <<_queryrow,QueryRow>> > array
|**total_rows** +
__optional__|Number of documents in the database.
This number is not the number of rows returned.|integer
|===


[[_replicationresponse]]
=== ReplicationResponse

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**ok** +
__optional__|Indicates whether the replication operation was successful|boolean
|**session_id** +
__optional__|Session identifier|string
|===


// tag::replication_model[]


[[_replication_model]]
=== Replication_model

// tag::replication_model_table[]

Data schema for the replication model


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**adhoc** +
__optional__|&quot;
*About*

Use the Admin REST API's `adhoc` parameter to specify that a replication is ad hoc rather than persistent.

*Behavior*

Ad hoc replications behave the same as normal replications, but they are automatically removed when their status changes to stopped.
This will usually be on completion, but may also be as a result of user action.

*Constraints*

This parameter is *NOT* available to configured replications; only those initialized using the Admin REST API.&quot; +
**Default** : `false`|boolean
|**batch_size** +
__optional__|*About*

Use the optional `batch_size` property to specify the number of changes to be included in a single batch during replication.|integer
|**cancel** +
__optional__|*About*

Use this parameter on,y when you want to want to cancel an existing active replication.

*Constraints*

* This parameter is *NOT* available in configured replications; only those initialized using the Admin REST API.

* *NOTE* that the body of the request must be the same as the replication's replication definition for the cancellation request to be honoured.
For example, if you requested continuous replication, the cancellation request must also contain the continuous field. +
**Default** : `false`|boolean
|**conflict_resolution_type** +
__optional__|*About*

The *`conflict_resolution_type`* property defines the conflict resolution policy that Sync Gateway applies when resolving conflicting revisions.

The default behavior is that automatic conflict resolution policy is applied.

*Valid options*
 - `default`
 - `localWins`
 - `remoteWins`
 - `custom`

*Behavior*

* _default_ - Selecting `default` applies the following conflict resolution policy
* Deletes always win (the delete with longest revision history wins if both revisions are deletes)
* The revision with the longest revision history wins (so, the one with most changes and consequently the highest revision Id).
* _localWins_ - Selecting `localWins` will result in local revisions always being the winner in any conflict.

* _remoteWins_ - Selecting `remoteWins` will result in remote revisions always being the winner in any conflict.
* _custom_ - Selecting `custom` specifies that you want to handle conflict resolution with your own application logic. You *must* provide this logic as a Javascript function by specifying it in using the custom-conflict-resolver parameter.

*Example*

----
"conflict_resolution_type":"remoteWins"
----

*Constraints*

* Replications created prior to version 2.8 will default to `default`. +
**Default** : `"default"`|string
|**continuous** +
__optional__|*About*

The `continuous` property specifies whether this replication will run in continuous mode.

*Behavior*

* `continuous=true`– In continuous mode, changes are immediately synced in accordance with the replication definition.
* `continuous=false`– Detected changes are synced in accordance with the replication definition. The replication ceases once all revisions are processed.

*Constraints*

* Optional for stops and removes +
**Default** : `false`|boolean
|**custom_conflict_resolver** +
__optional__|*About*

The optional `custom_conflict_resolver` property specifies the Javascript function that will be used to resolve conflicts, if the custom conflict resolution type is specified in the `conflict_resolution_type`.

*Options*

The property is _mandatory_ when `conflict_resolution_type=custom` and will be ignored in all other cases.

*Using*

Provide the required logic in a Javascript function, as a string within backticks (see also the description for the `sync` function`.

The function takes one parameter `struct` representing the conflict and comprising
- the document id
- the local document
- the remote document

The function returns a document `struct` representing the winning revision.

*Example*

----
"custom_conflict_resolver":`
  function(conflict) {
    console.log("full remoteDoc doc: "+JSON.stringify(conflict.RemoteDocument));
  return conflict.RemoteDocument;
}`
----

*Constraints*

Using complex `custom_conflict_resolver` functions can noticeably degrade performance. Use a built-in resolver whenever possible. +
**Default** : `"none"`|string
|**direction** +
__optional__|*About*

The mandatory `direction` property specifies whether the replication is _push_, _pull_ or _pushAndPull_ relative to this node.

The property value is referenced by the link:rest-api-admin.html#database-this_db-replications-remote[remote] property.

*Behavior*

* `pull` - changes are pulled from the `remote` database
* `push` - changes are pushed to the `remote` database
* `pushAndPull` - changes are both pushed-to and pulled-from the `remote` database

*Constraints*

Replications created prior to version 2.8 derive their _direction_ from the source/target url of the replication.|string
|**enable_delta_sync** +
__optional__|*About*

The optional `enable_delta_sync` parameter turns on delta sync for a replication.
It works in conjunction with the database level setting `delta_sync.enabled`.

*Options*

* `&quot;enable_delta_sync&quot;: true`, the replication can use delta sync (depending on `delta_sync.enabled` setting)
* `&quot;enable_delta_sync&quot;: false`, the replication cannot use delta sync

*Behavior*

The optional `enable_delta_sync` parameter works in conjunction with the database level `delta_sync.enabled` setting, to determine whether this replication uses delta sync.

* *If* `&quot;delta_sync.enabled&quot;: true` for both databases involved in the replication, then this parameter enables or disables its use for this specific replication.
* In all other cases it has no effect and the replication runs without delta-sync.

*Constraints*

* Applies *ONLY* to Enterprise Edition deployments.
* Depends upon the setting of the database level parameter `delta_sync.enabled`
* Replications created prior to version 2.8 must run with `&quot;enable_delta_sync&quot;: false`
* Push replications will not use Delta Sync when pushing to a pre-2.8 target +
**Default** : `false`|boolean
|**filter** +
__optional__|*About*

Use the optional `filter`property to defines the function to be used to filter documents.

*Options*

A common value used when replicating from Sync Gateway is `sync_gateway/bychannel`.
This option limits the pull replication to a specific set of channels.
You can specify the required channels using `query_params`.

*Behavior*

Works in conjunction with `query_params` to control the documents processed by the replication.

*Example*

----
"filter":"sync_gateway/bychannel"
----

*Constraints*

OPTIONAL for stops and removes (even if defined during creation)|string
|**initial_state** +
__optional__|*About*

The optional `initial_state` property is used to specify that the replication must be launched in 'Stopped' mode

*Behavior*

All replications are configured to start on Sync Gateway launch. So, if omitted, the state defaults to 'Running'.

**Constraints*

Replications created prior to version 2.8 will all default to a state of 'Running'. +
**Default** : `"Running"`|string
|**max_backoff_time** +
__optional__|The *max_backoff_time*property specifies the time-period (in minutes) during which Sync Gateway will attempt to reconnect lost or unreachable _remote_ targets.

On disconnection, Sync Gateway will do an exponential backoff up to the specified value, after which it will attempt to reconnect indefinitely every _max_backoff_time_ minutes.

If a zero value is specified, then Sync Gateway will do an exponential backoff up to an interval of five minutes before stopping the replication.

NOTE - this value defaults to five minutes for replications created prior to version 2.8.|integer
|**password** +
__optional__|*About*

Use `password` to provide the login password value for the accredited user running this replication.

*Behavior*

These details are used to authenticate credentials and approve access to data.

Once provided and recorded, the password data is redacted and will not be displayed in either the configuration file or Admin REST API. A string of `****` will be displayed in its place. +
**Default** : `"mandatory"`|string
|**purge_on_removal** +
__optional__|*About*

The optional `purge_on_removal` property specifies, per replication, whether the removal of a `channel` triggers a purge.

*Options*
- `true` or `false`
- Default = false - Document removals are ignored by receiving end

*Behavior*

If `purge_on_removal=false`, then the removal of channels is ignored (not purged) by the receiving end.

*Constraints*

* Applies only to PULL replications, including the PULL portion of a PUSHANDPULL replication.

* Replications created prior to version 2.8 _must_ be run with `purge_on_removal=false`. +
**Default** : `false`|boolean
|**query_params** +
__optional__|*About*

The `query_params` property defines a set of key/value pairs used in the query string of the replication.

*Behavior*

This property works in conjunction with `filters` and `channels` to provide routing.

*Using*

You can use `query_params`' _channels_ function to _pull_ from a specific set of `channels`.
To do so, you would also need to set the `filter` to `sync_gateway/bychannels`.

*Example*

[source,json]
----
  "filter":"sync_gateway/bychannel",
  "query_params": {
    "channels":["channel.user1"]
  },
----

*Constraints*

OPTIONAL for stops and removes (even if defined during creation)|< string > array
|**remote** +
__optional__|*About*

The *remote* property represents the endpoint of a database for the remote Sync Gateway.
That is, it identifies the remote Sync Gateway database that is the subject of this replication's push, pull or pushAndPull action.

Typically the endpoint will include URI, Port and Database name elements.

You can also include user credentials in the URL, in the form `&lt;username&gt;:&lt;password&gt;`.
The credentials relate to an existing Sync Gateway user on the remote server.

*Example*
`&quot;remote&quot;: &quot;http://user:password@example.com:4985/db1-remote&quot;
`

*Format*

* a string containing a valid URL for a (remote) Sync Gateway database.
* an object whose url property contains the Sync Gateway database URL.

*Behavior*

Dependent upon setting of *direction*.

If *direction* is :
 - _pull_, 'remote' defines the remote cluster _from_ which data is pulled
 - _push_, 'remote' defines the remote cluster _to_ which data is pushed
 - _pushAndPull_, 'remote' defines the _push_ configuration.

*Example*

[source,json]
----
"remote": "http://www.example.com:4984/sample-database",
----|string
|**replication_id** +
__optional__|*About*

The _replication_id_ property specifies either:

* For NEW replications, the ID to be assigned to the the replication.
If no _replication_id_ is specified, Sync Gateway will assign a random UUID to new replications.

* For existing replications, this is the ID of the required replication.

* If *cancel=true*, this is the id of the active replication task to be cancelled.

*Constraints*

If this is specified in the body of a POST or PUT request then it must be the same value as specified in the request URL.|string
|**username** +
__optional__|*About*

Use `username` to provide the name of the accredited user running this replication.

*Behavior*

These details are used to authenticate credentials and approve access to data

Once provided and recorded, the username data is redacted and will not be displayed in either the configuration file or Admin REST API. A string of `****` will be displayed in its place. +
**Default** : `"Mandatory"`|string
|===


// end::replication_model_table[]


// end::replication_model[]


[[_replicationstatusresponsebody]]
=== ReplicationStatusResponseBody

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**config** +
__optional__|This optional response content is returned only when using the {querystring} option with `includeConfig=true`. For example,

----
GET http://localhost:4985/db-local/_replicationStatus?includeError=true&includeConfig=true
----

It comprises the replication definition as would be returned using a `GET` request to the `_replication` endpoint.|object
|**delta_recv** +
__optional__|The number of delta-sync changes sent|integer
|**delta_requested** +
__optional__|The number of delta-sync changes requested.

This should always be non-zero when delta_sync.enabled is true.|integer
|**delta_sent** +
__optional__|This is the number of deltas sent.

Whether or not deltas are sent and-or received is based on whether the remote:

* has deltas enabled, and-or

* can generate a delta for the requested revision.|integer
|**doc_write_conflict** +
__optional__|The number of docs that were in conflict.|integer
|**doc_write_failures** +
__optional__|The number of docs that have failed to be written (pushed) to the target database.
These docs will not be retried.|integer
|**docs_purged** +
__optional__|The number of docs that have been purged.|integer
|**docs_read** +
__optional__|The number of docs that have been read (fetched) from the source database.|integer
|**docs_written** +
__optional__|The number of docs that have been written (pushed) to the target database.|integer
|**error_message** +
__optional__|A message describing the reason for the latest error.
It is reset each Sync Gateway restart.|string
|**last_seq_pull** +
__optional__|Last sequence number processed in pull replication.

The last_seq_pull result can be used by apps to determine if a specific document has been synced to target or not.

To do this, query the **_raw** endpoint and compare the sequence number of the document with the last_seq value (push or pull as approperiate) replicated.|string
|**last_seq_push** +
__optional__|Last sequence value processed in push replication.

The last_seq_push result can be used by apps to determine if a specific document has been synced to target or not.

To do this, query the **_raw** endpoint and compare the sequence number of the document with the last_seq value (push or pull as approperiate) replicated.|string
|**rejected_by_local** +
__optional__|Count of documents that were received by the local but did not get replicated because they were rejected by the sync function on the local|integer
|**rejected_by_remote** +
__optional__|Count of documents that were sent to the remote but did not get replicated because they were rejected by the sync function on the remote|integer
|**replication_id** +
__optional__|The replication Id.|string
|**status** +
__optional__|The status of the replication.

Valid values are:
- Starting
- Started
- Stopping
- Stopped
- Error|string
|===


[[_resync-response]]
=== Resync-response

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**docs_changed** +
__optional__|Shows the number of documents that have been changed as a result of the sync function.

Docs are only changed if when run through the new sync function the resulting doc is different to the currently stored doc.|integer
|**docs_procesed** +
__optional__|Shows the number of documents that have been run through the sync function.|integer
|**last_error** +
__optional__|Will ONLY be present when status = “stopped on error”

In the event of an error in the `_resync` process this field will contain error details.
Otherwise it is not visible.|string
|**start_time** +
__optional__|The `_resync` process start time in ISO 8601 format (for example: `2012-04-23T18:25:43.511Z`)|string
|**status** +
__optional__|Indicates the status of the resync operation.

Possible values:

* running,

* stopped,

* stopping,

* stopped on error|string
|===


[[_server]]
=== Server

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**couchdb** +
__optional__|Contains the string 'Welcome' (this is required for compatibility with CouchDB)|string
|**vendor/name** +
__optional__|The server type ('Couchbase Sync Gateway)|string
|**vendor/version** +
__optional__|The server version|string
|**version** +
__optional__|Sync Gateway version number|string
|===


[[_replicationresponsebody]]
=== ReplicationResponseBody
This is the replication definition set returned in response to a `GET` request.


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**this_rep** +
__optional__|This is the replication definition set returned in response to a `GET` request.|<<_replicationresponsebody_this_rep,this_rep>>
|===

[[_replicationresponsebody_this_rep]]
**this_rep**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**adhoc** +
__optional__|Indicates whether this replication is ad hoc (`&quot;adhoc&quot;: true`) or Persistent.
Both replications behave in the same way, except that *adhoc* replications are automatically removed when their status changes to *stopped*.
This will usually be on completion, but may also be as a result of user action). +
**Default** : `false`|boolean
|**batch_size** +
__optional__|*About*

The `batch_size` property specifies the number of changes to be included in a single batch during replication.|integer
|**conflict_resolution_type** +
__optional__|*About*

The *`conflict_resolution_type`* property specifies the conflict resolution policy Sync Gateway will apply when resolving conflicting revisions.

The default behavior is that automatic conflict resolution policy is applied.

*Valid options*

* `default`

* `localWins`

* `remoteWins`

* `custom`

*Behavior*

* _default_ - Selecting `default` applies the following conflict resolution policy

* Deletes always win (the delete with longest revision history wins if both revisions are deletes)

* The revision with the longest revision history wins (so, the one with most changes and consequently the highest revision Id).

* _localWins_ - Selecting `localWins` will result in local revisions always being the winner in any conflict.

* _remoteWins_ - Selecting `remoteWins` will result in remote revisions always being the winner in any conflict.

* _custom_ - Selecting `custom` specifies that you want to handle conflict resolution with your own application logic.
You *must* provide this logic as a Javascript function by specifying it in using the custom-conflict-resolver parameter.

*Example*

----
"conflict_resolution_type":"remoteWins"
----

*Constraints*

* Replications created prior to version 2.8 will default to `default`. +
**Default** : `"default"`|string
|**continuous** +
__optional__|*About*

The `continuous` property specifies whether this replication runs in continuous, or single-shot, mode.

*Behavior*

* `continuous=true`– In continuous mode, changes are immediately synced in accordance with the replication definition.

* `continuous=false`– Detected changes are synced in accordance with the replication definition. The replication ceases once all revisions are processed.

*Constraints*

* Optional for stops and removes +
**Default** : `false`|boolean
|**custom_conflict_resolver** +
__optional__|*About*

The `custom_conflict_resolver` property specifies the Javascript function that will be used to resolve conflicts, if the custom conflict resolution type is specified in the `conflict_resolution_type`.

*Options*

The property is _mandatory_ when `conflict_resolution_type=custom` and will be ignored in all other cases.

*Using*

Provide the required logic in a Javascript function, as a string within backticks (see also the description for the `sync` function`.

The function takes one parameter `struct` representing the conflict and comprising

* the document id

* the local document

* the remote document

The function returns a document `struct` representing the winning revision.

*Example*

----
"custom_conflict_resolver":`
  function(conflict) {
    console.log("full remoteDoc doc: "+JSON.stringify(conflict.RemoteDocument));
  return conflict.RemoteDocument;
}`
----

*Constraints*

Using complex `custom_conflict_resolver` functions can noticeably degrade performance. Use a built-in resolver whenever possible. +
**Default** : `"none"`|string
|**direction** +
__optional__|*About*

The mandatory `direction` property indicates whether the replication is _push_, _pull_ or _pushAndPull_.

The property value is referenced by the *remote* property.

*Constraints*

Replications created prior to version 2.8 derive the _direction_ from the source/target url of the replication.|string
|**enable_delta_sync** +
__optional__|*About*

The `enable_delta_sync` property specifies whether delta sync is, or is not, used for the replication.

*Options*

To use delta sync or not.

* `enable_delta_sync=true` - the replication runs using delta sync

* `enable_delta_sync=false` - the replication runs without delta sync

*Behavior*

The impact of this property is dependent on the `delta_sync.enabled` setting for the relevent databases as indicated here.

* *If* `&quot;delta_sync.enabled&quot;: true` for both databases involved in the replication, then this parameter enables or disables its use for this specific replication.

* In all other cases it has no effect and the replication runs without delta-sync.

*Constraints*

* Requires _Enterprise Edition_
* Replications created prior to version 2.8 run with `enable_delta_sync=false` +
**Default** : `false`|boolean
|**filter** +
__optional__|*About*

Use the optional `filter` property to defines the function to be used to filter documents.

*Options*

A common value used when replicating from Sync Gateway is `sync_gateway/bychannel`.
This option limits the pull replication to a specific set of channels.
You can specify the required channels using `query_params`.

*Behavior*

Works in conjunction with `query_params` to control the documents processed by the replication.

*Example*

----
"filter":"sync_gateway/bychannel"
----

*Constraints*

OPTIONAL for stops and removes (even if defined during creation)|string
|**initial_state** +
__optional__|*About*

The optional `initial_state` property is used to specify that the replication must be launched in 'Stopped' mode

*Behavior*

All replications are configured to start on Sync Gateway launch.
So, if omitted, the state defaults to 'Running'.

**Constraints*

Replications created prior to version 2.8 will all default to a state of 'Running'. +
**Default** : `"Running"`|string
|**max_backoff_time** +
__optional__|*About*

The *max_backoff_time* property indicates the time-period (in minutes) during which Sync Gateway will attempt to reconnect lost or unreachable _remote_ targets.

On disconnection, Sync Gateway will do an exponential backoff up to the specified value, after which it will attempt to reconnect indefinitely every _max_backoff_time_ minutes.

If the value is zero, Sync Gateway will do an exponential backoff up to an interval of five minutes before stopping the replication.

*Constrains*

This value defaults to five minutes for replications created prior to version 2.8.|integer
|**password** +
__optional__|The `password`, forms part of the login credentials used to access the data.

All password data is redacted and is displayed as a string of `****`. +
**Default** : `"Mandatory"`|string
|**perf_tuning_params** +
__optional__|The perf_tuning_params are yet to be defined (subject to performance testing)

NOTE - This property replaces the 'changes_feed_limit' at version 2.8|object
|**purge_on_removal** +
__optional__|*About*

The optional `purge_on_removal` property specifies, per replication, whether the removal of a `channel` triggers a purge.

*Options*
- `true` or `false`
- Default = false - Document removals are ignored by receiving end

*Behavior*

If `purge_on_removal=false`, then the removal of channels is ignored (not purged) by the receiving end.

*Constraints*

* Applies only to PULL replications, including the PULL portion of a PUSHANDPULL replication.

* Replications created prior to version 2.8 _must_ be run with `purge_on_removal=false`. +
**Default** : `false`|boolean
|**query_params** +
__optional__|*About*

The `query_params` property defines a set of key/value pairs used in the query string of the replication.

*Behavior*

This property works in conjunction with `filters` and `channels` to provide routing.

*Using*

You can use `query_params`' _channels_ function to _pull_ from a specific set of `channels`.
To do so, you would also need to set the `filter` to `sync_gateway/bychannels`.

*Example*

[source,json]
----
  "filter":"sync_gateway/bychannel",
  "query_params": {
    "channels":["channel.user1"]
  },
----

*Constraints*

OPTIONAL for stops and removes (even if defined during creation)|< string > array
|**remote** +
__optional__|*About*

The *remote* property represents a database URL for the remote Sync Gateway.
That is, it identifies the remote Sync Gateway database that is the subject of this replication's push, pull or pushAndPull action.

*Behavior*

Dependent upon setting of *direction*. If *direction* is :

* _pull_, this is the cluster _from_ which data is pulled

* _push_, this is the cluster _to_ which data is pushed

* _pushAndPull_, this is the cluste from which data is pushed.

*Example*

----
  "remote": "http://www.example.com:4984/db2name",
----

*Constraints*

* You must specify the 'remote' database's url even if it is located on the same cluster as the replication's database.

* OPTIONAL for stops and removes|string
|**replication_id** +
__optional__|*About*

The _replication_id_ property indicates the ID that Sync Gateway assigned to the replication.

Sync Gateway assigns a random UUID if no `replication_id` is specified when the replication is created.|string
|**username** +
__optional__|The `username` forms part of the credentials used to authenticate and approve access to data

This field is redacted a string of '****' is displayed in its place. +
**Default** : `"Mandatory"`|string
|===


[[_replicationstatistics-sgr1]]
=== ReplicationStatistics-SGR1
This is the replication definition set returned in response to an ExpVars `GET` request.


[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**replname** +
__optional__|This object comprises the stats collected and recorded for the inter-sync-gateway replication named $replname (which equates to a `replication_id`).

The same structure is used to return statistics from inter-sync-gateway replications versions 1 and 2, but not all items are populated by each version.|<<_replicationstatistics-sgr1_replname,replname>>
|===

[[_replicationstatistics-sgr1_replname]]
**replname**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**sgr_active** +
__optional__|Whether the replication is active at this time.
*Deprecated @ 2.8*: used only by inter-sync-gateway replications version 1.|boolean
|**sgr_docs_checked_sent** +
__optional__|The total number of documents checked for changes since replication started.

This represents the number of potential change notifications pushed by Sync Gateway.

*Constraints*
- This is not necessarily the number of documents pushed, as a given target might already have the change.

* Used by versions 1 and 2.|integer
|**sgr_num_attachment_bytes_transferred** +
__optional__|The total number of attachment bytes transferred since replication started.
*Deprecated @ 2.8*: used only by inter-sync-gateway replications version 1.|integer
|**sgr_num_attachments_transferred** +
__optional__|The total number of attachments transferred since replication started.
*Deprecated @ 2.8*: used only by inter-sync-gateway replications version 1.|integer
|**sgr_num_docs_failed_to_push** +
__optional__|The total number of documents that failed to be pushed since replication started.

Used by versions 1 and 2.|integer
|**sgr_num_docs_pushed** +
__optional__|The total number of documents that were pushed since replication started.

Used by versions 1 and 2.|integer
|===


[[_view]]
=== View

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**_rev** +
__optional__|Revision identifier of the parent revision the new one should replace. (Not used when creating a new document.)|string
|**views** +
__optional__|List of views to save on this design document.|<<_view_views,views>>
|===

[[_view_views]]
**views**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**my_view_name** +
__optional__|The view's map/reduce functions.|<<_view_my_view_name,my_view_name>>
|===

[[_view_my_view_name]]
**my_view_name**

[options="header", cols=".^3,.^11,.^4"]
|===
|Name|Description|Schema
|**map** +
__optional__|Inline JavaScript definition for the map function|string
|**reduce** +
__optional__|Inline JavaScript definition for the reduce function|string
|===



